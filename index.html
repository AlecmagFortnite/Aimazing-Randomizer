<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>WhatsApp AI – Kontakte</title>

<style>
:root{
  --main:#075E54;
  --accent:#25D366;
  --bg:#ECE5DD;
}
body{
  margin:0;
  font-family:system-ui;
  background:var(--bg);
  display:flex;
  flex-direction:column;
  align-items:center;
}
h1{color:var(--main);margin:20px 0;}
button{
  background:var(--accent);
  border:none;
  color:white;
  padding:12px 16px;
  border-radius:10px;
  font-weight:bold;
  cursor:pointer;
}
#list{
  width:90%;
  max-width:420px;
  display:flex;
  flex-direction:column;
  gap:10px;
}
.item{
  background:white;
  padding:14px;
  border-radius:12px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  box-shadow:0 4px 10px rgba(0,0,0,.1);
  cursor:pointer;
}
.number{color:#555;font-size:.9rem}
.del{background:#ff4d4d}
</style>
</head>

<body>
<h1>Chats</h1>

<button onclick="createChat()">Nummer erstellen</button>
<br>

<div id="list"></div>

<script>
let chats = JSON.parse(localStorage.getItem("chats")||"[]");
const MAX=15;

function save(){localStorage.setItem("chats",JSON.stringify(chats));}

function genNr(){
  return "+49 "+Math.floor(100+Math.random()*899)+" "+Math.floor(1000000+Math.random()*8999999);
}

function render(){
  list.innerHTML="";
  chats.forEach((c,i)=>{
    const d=document.createElement("div");
    d.className="item";
    d.onclick=()=>location.href=`chat.html?id=${i}`;
    d.innerHTML=`
      <div>
        <b>${c.name||"Unbekannt"}</b>
        <div class="number">${c.number}</div>
      </div>
      <button class="del" onclick="event.stopPropagation();del(${i})">✖</button>
    `;
    list.appendChild(d);
  });
}

function createChat(){
  if(chats.length>=MAX) return alert("Max. 15 Chats");
  chats.push({
    name:"",
    number:genNr(),
    mode:"friend",
    history:[]
  });
  save();render();
}

function del(i){chats.splice(i,1);save();render();}
render();
</script>
</body>
</html>
